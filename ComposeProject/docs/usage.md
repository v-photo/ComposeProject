# 项目功能使用说明 (Usage Guide)

本文件旨在说明`ComposeProject`中一些高级或不直观功能的使用方法。

## 全场预测降采样 (`Downsampling`)

### 1. 功能说明

降采样是一个用于**加速调试和快速验证**的功能。

在进行全场预测时，模型需要对空间中每一个网格点进行预测，这在网格非常密集时会消耗大量计算时间。降采样功能可以通过**降低预测网格的分辨率**来显著减少预测点的数量，从而大幅缩短模型评估所需的时间。

此功能主要影响**步骤3 (结果评估)** 和 **步骤4 (可视化)**，它会同时减少预测点数量和用于对比的真实值数量。

### 2. 如何使用

通过在运行`main.py`时添加`--downsample`命令行参数来启用此功能。

该参数接受一个**大于1的整数**。例如，`--downsample 4` 表示将采样密度在每个维度上降低为原来的 1/4。

**示例命令:**
```bash
# 在x, y, z三个维度上，每4个点取1个点进行预测和评估
python main.py --mode 1 --downsample 4
```

### 3. 技术实现

降采样功能在`main.py`的数据准备阶段实现。其核心逻辑如下：

1.  **获取原始网格尺寸**: 首先获取原始数据中完整的网格尺寸，例如 `(100, 100, 80)`。
2.  **设置步长**: 将`--downsample`参数的值作为步长 (`step`)。
3.  **生成降采样索引**: 对x, y, z三个维度，分别使用 `np.arange(0, original_size, step)` 来生成新的、更稀疏的索引。
4.  **构建新的预测点坐标**: 使用新的稀疏索引来计算预测点的物理坐标。
5.  **提取对应的真值**: 在最后进行性能评估时，使用`np.ix_`和稀疏索引从原始的真实值网格中提取出与预测点完全对应的真值，以保证评估的公平性。

**注意**:
- `--downsample 1` (默认值)表示不进行任何降采样，使用原始分辨率。
- 该功能仅用于加速测试，在最终生成高精度结果时不应使用。 