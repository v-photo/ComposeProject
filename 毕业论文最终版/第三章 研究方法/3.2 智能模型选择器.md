# 3.2 智能模型选择器

智能模型选择器（Intelligent Model Selector）是本框架“双层自适应路径”中的第一层决策单元。它的核心任务是解决辐射场重建中的一个根本性问题：**针对当前观测数据的分布形态，哪种数学模型能在最短时间内提供最可信的结果？**

### 3.2.1 空间特征双重判据

在实际工程场景中，观测数据面临着“覆盖不足”与“分布不均”双重挑战。为了全面评估数据质量，本研究设计了包含**全域覆盖度 (Coverage Ratio)** 与 **最近邻距离变异系数 ($CV_{NN}$)** 的双重判别机制。

#### 1. 全域覆盖度 (Coverage Ratio)
首要判据用于识别数据是否具备进行空间插值的基础条件。当探测点仅局限于监测区域的局部角落（如仅在入口处布设），即使局部排列非常规整，基于纯数学统计的插值方法（如 Kriging）也会因严重的外部推演（Extrapolation）导致预测失真。

本系统引入**全域覆盖度**指标，计算观测点集合的最小包围盒（Bounding Box）体积与目标重建区域体积的比值：
$$ C_{ratio} = \frac{V_{bbox}}{V_{domain}} $$
若 $C_{ratio}$ 低于预设的安全阈值（如 0.3），说明数据未有效支撑起重建空间，必须依赖物理规律进行约束，从而直接判定进入物理模型路径。

#### 2. 最近邻距离变异系数 ($CV_{NN}$)
在覆盖度满足基本要求的前提下，进一步通过 $CV_{NN}$ 评估数据的微观分布形态。该指标定量描述了空间点集的“均匀程度”或“聚集程度”，其物理意义如下：
*   **均匀分布**：若探测器按规则网格布设，每个点到最近邻居的距离几乎相等，距离数值的标准差极小，$CV_{NN} \to 0$。
*   **聚集分布**：若探测器受地形限制集中在部分路径或源项附近，导致最近邻距离差异巨大（密处极小、疏处极大），$CV_{NN}$ 显著增大。

数学上，对于 $N$ 个观测点，先将坐标归一化至 $[0, 1]^3$，计算每个点到其最近邻点的欧氏距离 $d_i$，统计均值 $\mu_d$ 和标准差 $\sigma_d$，得 $CV_{NN} = \sigma_d / \mu_d$。

### 3.2.2 自动决策逻辑

基于大量实验数据的统计分析，本系统确立了一套分级决策逻辑，指导算法路径的自动切换：

1.  **物理约束路径 (PINN)**
    *   **一级触发**：$C_{ratio} < T_{cover}$（覆盖度严重不足）。此时纯数据插值面临巨大的外推风险，必须利用 PINN 求解 PDE 在无数据区进行符合物理规律的逻辑推演。
    *   **二级触发**：$CV_{NN} \ge T_{cv}$（数据分布聚集或稀疏）。当数据存在明显的空间异质性时，插值算法易产生数值震荡（Runge 现象），需引入物理方程约束解空间以保证合理性。
    *   **决策依据**：PINN 不完全依赖数据点，能通过物理机制弥补观测信息的缺失或不均，是低质量数据环境下的鲁棒选择。

2.  **数据驱动路径 (GPU-Kriging)**
    *   **触发条件**：$C_{ratio} \ge T_{cover}$ 且 $CV_{NN} < T_{cv}$（覆盖良好且分布均匀）。
    *   **决策依据**：当数据质量较高时，空间自相关性（Spatial Autocorrelation）能够被 Kriging 算法精确捕捉。此时，利用 GPU 加速的 Kriging 算法可在秒级甚至毫秒级内完成重建，在满足精度前提下实现效率最优。

### 3.2.3 异常处理与人工干预机制

尽管自动选择器在大多数情况下能做出正确判断，系统仍设计了多重保障机制以应对极端工况：

*   **极小样本保护**：当观测点数量极少（如 $N < 100$）时，变异函数拟合极不稳定，系统将强制锁定至 PINN 路径，利用物理先验知识弥补数据匮乏。
*   **边缘模糊处理**：当指标处于阈值附近的模糊地带时，系统默认倾向于选择鲁棒性更强的 PINN 路径，以计算时间换取结果的可靠性。
*   **人工超控接口**：为满足特定科研需求（如对比算法极限性能），研究人员可通过配置参数强制指定运行路径，保留了作为科研工具的灵活性。
